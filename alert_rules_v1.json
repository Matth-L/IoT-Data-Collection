{"apiVersion":1,"groups":[{"orgId":1,"name":"1-minute-elevation-group","folder":"sensor-test","interval":"1m","rules":[{"uid":"deieiq0q8pzi8c","title":"temperature-discord","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"ceiefmj6p20hsd","model":{"intervalMs":1000,"maxDataPoints":43200,"query":"from(bucket: \"iot\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"mqtt_consumer\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"decoded_payload_temperature\")\n  |\u003e filter(fn: (r) =\u003e r[\"topic\"] == \"v3/iot-uqac@ttn/devices/carte-mkr-uqac/up\")\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |\u003e yield(name: \"mean\")","refId":"A"}},{"refId":"B","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[],"type":"gt"},"operator":{"type":"and"},"query":{"params":["B"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"reducer":"last","refId":"B","type":"reduce"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[20],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"B","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"description":"La température est au dessus de 20 degré CELSIUS","summary":"TEMPERATURE ELEVEE"},"isPaused":false,"notification_settings":{"receiver":"Discord-webhook"}},{"uid":"aeieisyzppvcwb","title":"humidité-discord","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"ceiefmj6p20hsd","model":{"intervalMs":1000,"maxDataPoints":43200,"query":"from(bucket: \"iot\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"mqtt_consumer\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"decoded_payload_humidity\")\n  |\u003e filter(fn: (r) =\u003e r[\"topic\"] == \"v3/iot-uqac@ttn/devices/carte-mkr-uqac/up\")\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |\u003e yield(name: \"mean\")","refId":"A"}},{"refId":"B","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[],"type":"gt"},"operator":{"type":"and"},"query":{"params":["B"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"reducer":"last","refId":"B","type":"reduce"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[200],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"B","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"description":"L'humidité est beaucoup trop élevée","summary":"HUMIDITE ELEVEE"},"isPaused":false,"notification_settings":{"receiver":"Discord-webhook"}},{"uid":"deiej7wl2iku8f","title":"temperature-mail","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":600,"to":0},"datasourceUid":"ceiefmj6p20hsd","model":{"intervalMs":1000,"maxDataPoints":43200,"query":"from(bucket: \"iot\")\n  |\u003e range(start: v.timeRangeStart, stop: v.timeRangeStop)\n  |\u003e filter(fn: (r) =\u003e r[\"_measurement\"] == \"mqtt_consumer\")\n  |\u003e filter(fn: (r) =\u003e r[\"_field\"] == \"decoded_payload_temperature\")\n  |\u003e filter(fn: (r) =\u003e r[\"topic\"] == \"v3/iot-uqac@ttn/devices/carte-mkr-uqac/up\")\n  |\u003e aggregateWindow(every: v.windowPeriod, fn: mean, createEmpty: false)\n  |\u003e yield(name: \"mean\")","refId":"A"}},{"refId":"B","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[],"type":"gt"},"operator":{"type":"and"},"query":{"params":["B"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"reducer":"last","refId":"B","type":"reduce"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[20],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"B","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"summary":"temperature-mail-test"},"isPaused":false,"notification_settings":{"receiver":"Humidity_mail"}}]}]}